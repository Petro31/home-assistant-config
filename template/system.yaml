- sensor:
  - unique_id: ups_model
    name: UPS Model
    state: Back-UPS RS 1500MS
    attributes:
      template: system

  - unique_id: ups_battery_runtime
    name: UPS Battery Runtime
    state: >
      {%- set up_time = states('sensor.ups_battery_runtime_seconds') | int %}
      {%- macro phrase(name, divisor, mod=None) %}
        {%- set value = ((up_time // divisor) % (mod if mod else divisor)) | int %}
        {%- set end = 's' if value > 1 else '' %}
        {{- '{} {}{}'.format(value, name, end) if value | int > 0 else '' }}
      {%- endmacro %}
      
      {%- set values = [ 
                 phrase('hr', 60*60, 24),
                 phrase('min', 60),
             ] | select('!=','') | list %}
                    
      {{ values[:-1] | join(', ') ~ ' ' ~ values[-1] if values | length > 1 else values | first | default }}
    attributes:
      template: system

  - unique_id: disk_use_total
    name: Disk Use Total
    state: >
      {{ (states('sensor.disk_free_home') | float + states('sensor.disk_use_home') | float) | round(1) }}
    unit_of_measurement: "GiB"
    attributes:
      template: system
      
  - unique_id: memory_use_total
    name: Memory Use Total
    state: >
      {{ (states('sensor.memory_free') | float + states('sensor.memory_use') | float) | round(1) }}
    unit_of_measurement: "MiB"
    attributes:
      template: system