# Momentary Switches

- platform: momentary
  name: Announce Dryer

- platform: momentary
  name: Announce Washer

# Template Switches

- platform: template
  switches:

      # security notifications
      security_notifications:
        unique_id: secutiry_notifications
        friendly_name: Arm / Disarm Notifications
        value_template: >
          {{ is_state('input_select.home_security', 'armed') }}
        turn_on:
        - service: input_select.select_option
          target: &security_notifications_target
            entity_id: input_select.home_security
          data:
            option: armed
        turn_off:
        - service: input_select.select_option
          target: *security_notifications_target
          data:
            option: disarmed
        icon_template: mdi:{{ 'shield-lock' if is_state('input_select.home_security', 'armed') else 'shield-off' }}

      # drinking board games
      board_games_party:
        unique_id: board_games_party
        friendly_name: Board Games Party
        value_template: >
          {{ is_state('group.party_script_board_games_party', 'on') and is_state('switch.lzw45_mood_lighting', 'on') }}
        turn_on:
        - service: script.party_on
          data:
            party: board_games_party
            artist: Empire of the Sun
            pixel_effect: aurora
            entities:
            - switch.hyperion_rainbow_swirl_fast
        turn_off:
        - service: script.party_off
          data:
            party: board_games_party
            
      # 80s party
      the_80s_party:
        unique_id: the_80s_party
        friendly_name: 80s Party
        value_template: >
          {{ is_state('group.party_script_the_80s_party', 'on') and is_state('switch.lzw45_mood_lighting', 'on') }}
        turn_on:
        - service: script.party_on
          data:
            party: the_80s_party
            artist: I Heart 80s
            pixel_effect: aurora
            entities:
            - switch.hyperion_rainbow_swirl_fast
        turn_off:
        - service: script.party_off
          data:
            party: the_80s_party
            
      # christmas party
      christmas_party:
        unique_id: christmas_party
        friendly_name: Christmas Party
        value_template: >
          {{ is_state('group.party_script_christmas_party', 'on') and is_state('switch.lzw45_mood_lighting', 'on') }}
        turn_on:
        - service: script.party_on
          data:
            party: christmas_party
            artist: I Heart Christmas
            quick_color: 120
            entities:
            - switch.hyperion_solid_green
            - light.christmas_tree
        turn_off:
        - service: script.party_off
          data:
            party: christmas_party

      # LZW MOOD LIGHTING
      lzw45_mood_lighting:
        unique_id: lzw45_mood_lighting
        friendly_name: Mood Lighting
        value_template: "{{ states('input_text.lzw45_last_effect') != 'off' }}"
        turn_on:
        - service: input_number.set_value
          data:
            entity_id: input_number.quick_strip_color_temp
            value: 2700
        - service: input_select.select_option
          data:
            entity_id: input_select.quick_strip_effect
            option: solid
        turn_off:
        - choose:
          - conditions:
            - condition: template
              value_template: "{{ is_state('input_select.quick_strip_effect', 'off') }}"
            sequence:
            - service: script.lzw45_ui_quick_effect
            - service: input_text.set_value
              data:
                entity_id: input_text.lzw45_last_effect
                value: "off"
          default:
            service: input_select.select_option
            data:
              entity_id: input_select.quick_strip_effect
              option: 'off'

      # INSIDE LIGHTS SWITCH
      inside:
        unique_id: 443e46ff-89e7-470e-931c-a6536d6f203b
        friendly_name: Inside
        value_template: "{{ is_state('group.inside_area','on') }}"
        turn_on:
          service: homeassistant.turn_on
          data:
            entity_id: group.inside_area
        turn_off:
          service: homeassistant.turn_off
          data:
            entity_id: group.inside_area
      
      # OUTSIDE LIGHTS SWITCH
      outside:
        unique_id: 950b45f3-2b3d-44cc-a929-9acbad784506
        friendly_name: Outside
        value_template: "{{ is_state('group.outside_area','on') }}"
        turn_on:
          service: homeassistant.turn_on
          data:
            entity_id: group.outside_area
        turn_off:
          service: homeassistant.turn_off
          data:
            entity_id: group.outside_area
      
      # UPSTAIRS LIGHTS SWITCH
      upstairs:
        unique_id: e0e25962-83b4-4c60-a5e4-92311e9e00d6
        friendly_name: Upstairs
        value_template: "{{ is_state('group.upstairs_area','on') }}"
        turn_on:
          service: homeassistant.turn_on
          data:
            entity_id: group.upstairs_area
        turn_off:
          service: homeassistant.turn_off
          data:
            entity_id: group.upstairs_area
      
      # DOWNSTAIRS LIGHTS SWITCH
      downstairs:
        unique_id: d1b92436-e08c-4d8f-8d71-7331df4d2cf0
        friendly_name: Downstairs
        value_template: "{{ is_state('group.downstairs_area','on') }}"
        turn_on:
          service: homeassistant.turn_on
          data:
            entity_id: group.downstairs_area
        turn_off:
          service: homeassistant.turn_off
          data:
            entity_id: group.downstairs_area
      
      # XBOX HARMONY ACTIVITY
      xbox_one:
        unique_id: 2bb5c91b-5ff2-41d5-b1fa-7fa603c54fee
        friendly_name: Xbox One
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Xbox One') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: Xbox One
        turn_off: &harmony_activity_off
        - service: script.harmony_activity_off
      
      # PLAYSTATION HARMONY ACTIVITY
      playstation:
        unique_id: 8b9bae0f-2eb8-4af3-bb54-3d0252437ad6
        friendly_name: Playstation
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Playstation') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: Playstation
        turn_off: *harmony_activity_off
      
      # SWITCH HARMONY ACTIVITY
      switch:
        unique_id: 9c1d6eab-6652-4531-b8d3-30662b4fb928
        friendly_name: Switch
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Switch') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: Switch
        turn_off: *harmony_activity_off
      
      # TV HARMONY ACTIVITY
      tv:
        unique_id: ec14504b-9b62-4b44-bcf1-5d0218e4504d
        friendly_name: TV
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'TV') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: TV
        turn_off: *harmony_activity_off
      
      # CHROMECAST HARMONY ACTIVITY
      chromecast:
        unique_id: c27197a0-e746-4873-ae62-737784541cf5
        friendly_name: Chromecast
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Chromecast') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: Chromecast
        turn_off: &chromecast_off
        - service: script.harmony_activity_off
        - service: script.stop_casting

      # OFF ACTIVITY
      poweroff:
        unique_id: ab55c1de-77f1-49f6-9b70-2237e96847be
        friendly_name: Power Off
        value_template: "{{ not is_state_attr('remote.living_room', 'current_activity', 'PowerOff') }}"
        turn_on: &harmony_all_off
          - service: script.harmony_all_off
        turn_off: *harmony_all_off
        
      # ROKU HARMONY ACTIVITY
      roku:
        unique_id: 9b436b75-1a7e-4d5f-a2ad-016308a8cbef
        friendly_name: Roku
        value_template: "{{ is_state_attr('remote.living_room', 'current_activity', 'Roku') }}"
        turn_on:
        - service: script.harmony_activity_on
          data:
            activity: Roku
        turn_off: *harmony_activity_off
            
      # NETFLIX
      netflix:
        unique_id: b289f6f7-ab1b-4c58-9f78-7044b1e33457
        friendly_name: Netflix
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Netflix') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Netflix
        turn_off: &turn_off_roku
        - service: switch.turn_off
          entity_id: switch.roku
            
      # HBO
      hbo:
        unique_id: c1c2a1f3-a01f-4e58-8ab9-d4fc8bd82832
        friendly_name: HBO
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Max') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Max
        turn_off: *turn_off_roku
            
      # Hulu
      hulu:
        unique_id: dbbc7f9c-3737-4e2e-bb81-de71495b1d7e
        friendly_name: Hulu
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Hulu') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Hulu
        turn_off: *turn_off_roku
            
      # Prime Video
      prime_video:
        unique_id: e93b60fb-9f47-411e-8672-81674a2f9061
        friendly_name: Prime Video
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Prime Video') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Prime Video
        turn_off: *turn_off_roku

            
      # Disney Plus
      disney_plus:
        unique_id: 8971c31c-5529-4fc6-b98b-113b8c38b8a6
        friendly_name: Disney Plus
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Disney Plus') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Disney Plus
        turn_off: *turn_off_roku
            
      # Plex
      plex:
        unique_id: 263a42a3-25e8-43ac-a39b-2eaa07d3711f
        friendly_name: Plex
        value_template: >
          {{ is_state('switch.roku', 'on') and 'plex' in state_attr('media_player.roku_living_room', 'source') | string | lower }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: >
              {%- set player = expand('media_player.roku_living_room') | first %}
              {%- set ns = namespace(ret=[]) %}
              {%- for source in player.attributes.source_list %}
                {%- if 'plex' in source.lower() %}
                  {%- set ns.ret = ns.ret + [ source ] %}
                {%- endif %}
              {%- endfor %}
              {{ ns.ret | first | default('Plex - Free Movies & TV') }}
        turn_off: *turn_off_roku

      # Peacock
      peacock:
        unique_id: 966ded9b-6022-44fb-93f3-3924b35d392f
        friendly_name: Peacock
        value_template: >
          {{ is_state('switch.roku', 'on') and 
             is_state_attr('media_player.roku_living_room', 'source', 'Peacock TV') }}
        turn_on:
        - service: script.roku_source_on
          data:
            source: Peacock TV
        turn_off: *turn_off_roku

      echo_through_receiver:
        unique_id: a7bcc52e-6cba-459d-9aaf-e67a0b6ca7bc
        friendly_name: Echo
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a_zone2', 'source', 'Echo')
             and is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Echo')
             and is_state('switch.floating_outlet_switch', 'on') }}
        turn_on:
        - service: script.echo_through_receiver_on
        turn_off:
        - service: script.echo_through_receiver_off

      airplay_through_receiver:
        unique_id: d5d0e235-776f-4c99-b6dd-127007bb032d
        friendly_name: Airplay
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a_zone2', 'source', 'AirPlay')
             and is_state_attr('media_player.yamaha_rx_v6a', 'source', 'AirPlay') }}
        turn_on:
        - service: script.airplay_through_receiver_on
        turn_off:
        - service: script.echo_through_receiver_off

      #####################
      # LIVING ROOM MUSIC #
      #####################

      echo_through_living_room:
        unique_id: 815d21aa-2822-4f94-a840-9210d82ecb56
        friendly_name: Echo
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Echo')
             and is_state('switch.floating_outlet_switch', 'on') }}
        turn_on:
        - service: script.echo_through_media_player
          data:
            switch: switch.floating_outlet_switch
            media_player: media_player.yamaha_rx_v6a
            desired_state: "on"
            source: Echo
          
        turn_off:
        - service: script.echo_through_media_player
          data:
            switch: switch.floating_outlet_switch
            media_player: media_player.yamaha_rx_v6a
            desired_state: "off"
            source: Echo

      living_room_airplay:
        unique_id: 9c196f1e-5b2a-4377-9717-e69745d3a93e
        friendly_name: Airplay
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'AirPlay') }}
        turn_on:
        - service: script.media_player_on
          data:
            media_player: media_player.yamaha_rx_v6a
            volume: 0.7
            source: AirPlay
          
        turn_off:
        - service: script.media_player_off
          data:
            media_player: media_player.yamaha_rx_v6a

      #####################
      # DINING ROOM MUSIC #
      #####################

      echo_through_dining_room:
        unique_id: f5862f89-1245-42bc-a1c2-0c9476513b5d
        friendly_name: Echo
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a_zone2', 'source', 'Echo')
             and is_state('switch.floating_outlet_switch', 'on') }}
        turn_on:
        - service: script.echo_through_media_player
          data:
            switch: switch.floating_outlet_switch
            media_player: media_player.yamaha_rx_v6a_zone2
            desired_state: "on"
            source: Echo
          
        turn_off:
        - service: script.echo_through_media_player
          data:
            switch: switch.floating_outlet_switch
            media_player: media_player.yamaha_rx_v6a_zone2
            desired_state: "off"
            source: Echo

      dining_room_airplay:
        unique_id: 7f266638-f0b9-4cc5-bfd9-3243a5433e81
        friendly_name: Airplay
        value_template: >
          {{ is_state_attr('media_player.yamaha_rx_v6a_zone2', 'source', 'AirPlay') }}
        turn_on:
        - service: script.media_player_on
          data:
            media_player: media_player.yamaha_rx_v6a_zone2
            volume: 0.7
            source: AirPlay
          
        turn_off:
        - service: script.media_player_off
          data:
            media_player: media_player.yamaha_rx_v6a_zone2

      ##############
      # DECK MUSIC #
      ##############

      echo_through_deck:
        unique_id: a0040da5-1837-495a-a7e6-880dac87985a
        friendly_name: Echo
        value_template: >
          {{ is_state_attr('media_player.yamaha_receiver', 'source', 'Echo')
             and is_state('switch.basement_bluetooth', 'on') }}
        turn_on:
        - service: script.echo_through_media_player
          data:
            switch: switch.basement_bluetooth
            media_player: media_player.yamaha_receiver
            desired_state: "on"
            source: Echo
          
        turn_off:
        - service: script.echo_through_media_player
          data:
            switch: switch.basement_bluetooth
            media_player: media_player.yamaha_receiver
            desired_state: "off"
            source: Echo

      deck_airplay:
        unique_id: 168dea92-5fd4-4888-b5d7-7b97393bdd16
        friendly_name: Airplay
        value_template: >
          {{ is_state_attr('media_player.yamaha_receiver', 'source', 'AirPlay') }}
        turn_on:
        - service: script.media_player_on
          data:
            media_player: media_player.yamaha_receiver
            volume: 0.7
            source: AirPlay
          
        turn_off:
        - service: script.media_player_off
          data:
            media_player: media_player.yamaha_receiver

      ##################
      # BASEMENT MUSIC #
      ##################

      echo_through_basement:
        unique_id: fde6c03a-07c5-4ad0-9dc6-742214a59d7b
        friendly_name: Echo
        value_template: >
          {{ is_state_attr('media_player.yamaha_receiver_zone_2', 'source', 'Echo')
             and is_state('switch.basement_bluetooth', 'on') }}
        turn_on:
        - service: script.echo_through_media_player
          data:
            switch: switch.basement_bluetooth
            media_player: media_player.yamaha_receiver_zone_2
            desired_state: "on"
            source: Echo

        turn_off:
        - service: script.echo_through_media_player
          data:
            switch: switch.basement_bluetooth
            media_player: media_player.yamaha_receiver_zone_2
            desired_state: "off"
            source: Echo

      basement_airplay:
        unique_id: 1e6e1c2f-379d-4937-9d8d-635d9bbb719c
        friendly_name: Airplay
        value_template: >
          {{ is_state_attr('media_player.yamaha_receiver_zone_2', 'source', 'AirPlay') }}
        turn_on:
        - service: script.media_player_on
          data:
            media_player: media_player.yamaha_receiver_zone_2
            volume: 0.7
            source: AirPlay
          
        turn_off:
        - service: script.media_player_off
          data:
            media_player: media_player.yamaha_receiver_zone_2

      #############################
      # Receiver Sources - RX-V6A #
      #############################
      
      # Xbox Source
      xbox_source:
        unique_id: 29fe3012-52fe-4ccc-b28d-5c6ac93e2067
        friendly_name: Xbox One Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Xbox One') }}"
        turn_on: &xbox_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Xbox One
        turn_off: *xbox_source

      # Playstation Source
      playstation_source:
        unique_id: a7f75a01-aac8-4ee2-b5e1-87aa0bb5fcd6
        friendly_name: Playstation Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'PlayStation 5') }}"
        turn_on: &playstation_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: PlayStation 5
        turn_off: *playstation_source

      # Switch Source
      nintendo_switch_source:
        unique_id: 3aa122cd-d3e2-465a-8334-eb127a10cda7
        friendly_name: Switch Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Switch') }}"
        turn_on: &nintendo_switch_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Switch
        turn_off: *nintendo_switch_source

      # Roku Source
      roku_source:
        unique_id: db0937e0-4c4d-49d6-9ab2-9e264bad79b9
        friendly_name: Roku Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Roku') }}"
        turn_on: &roku_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Roku
        turn_off: *roku_source

      # Phone Source
      phone_source:
        unique_id: 46ed2e61-aef2-4c03-9e90-b5b8018c9335
        friendly_name: Aux Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Phone') }}"
        turn_on: &phone_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Phone
        turn_off: *phone_source

      # Phone Source
      chromecast_source:
        unique_id: 050698b4-fdb1-4057-b963-f8996745a67e
        friendly_name: Chromecast Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Chromecast') }}"
        turn_on: &chromecast_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Chromecast
        turn_off: *chromecast_source

      # Alexa Source
      alexa_source:
        unique_id: ac227fe0-8517-4461-b636-b65f9a36eef7
        friendly_name: Alexa Source
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a', 'source', 'Echo') }}"
        turn_on: &alexa_source
          - service: media_player.select_source
            data:
              entity_id: media_player.yamaha_rx_v6a
              source: Echo
        turn_off: *alexa_source

      #################################
      # Surround Sound Modes - RX-V6A #
      #################################

      # Standard Surround Mode
      surround_mode_standard:
        unique_id: 2c57142d-92b1-4e8c-b78c-aea0050efa15
        friendly_name: Standard
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','standard') }}"
        turn_on: &surround_standard
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: standard
        turn_off: *surround_standard

      # Munich Sound Mode
      surround_mode_munich:
        unique_id: c8952e7c-c8aa-47d2-bacb-ba1c5e17fff7
        friendly_name: Munich
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','munich') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: munich
        turn_off: *surround_standard

      # Vienna Sound Mode
      surround_mode_vienna:
        unique_id: d660b24c-e46b-4a45-b4a0-1eef7a4141c5
        friendly_name: Vienna
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','vienna') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: vienna
        turn_off: *surround_standard

      # Chamber Sound Mode
      surround_mode_chamber:
        unique_id: 6376f72b-d71e-414f-9f1c-57b0676040ef
        friendly_name: Chamber
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','chamber') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: chamber
        turn_off: *surround_standard

      # Cellar Club Sound Mode
      surround_mode_cellar_club:
        unique_id: acbf1fc5-3180-4f8b-817a-86f3e36c23a7
        friendly_name: Cellar Club
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','cellar_club') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: cellar_club
        turn_off: *surround_standard

      # Roxy Theatre Sound Mode
      surround_mode_roxy_theatre:
        unique_id: 0f3f7222-4597-4cff-bf3d-9ec8059a57e1
        friendly_name: Roxy Theatre
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','roxy_theatre') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: roxy_theatre
        turn_off: *surround_standard

      # Bottom Line Sound Mode
      surround_mode_bottom_line:
        unique_id: 59a9e3d2-f9da-4e74-8ed7-0d5c6e965df6
        friendly_name: Bottom Line
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','bottom_line') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: bottom_line
        turn_off: *surround_standard

      # Sports Sound Mode
      surround_mode_sports:
        unique_id: c707d043-1724-4238-ad21-893992ff1237
        friendly_name: Sports
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','sports') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: sports
        turn_off: *surround_standard

      # Action Game Sound Mode
      surround_mode_action_game:
        unique_id: 6e3a8556-daa2-44e8-8857-290ec880becb
        friendly_name: Action Game
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','action_game') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: action_game
        turn_off: *surround_standard

      # Roleplaying Game Sound Mode
      surround_mode_roleplaying_game:
        unique_id: 79a1c453-57cf-4eef-bc73-ce83ddb4a5aa
        friendly_name: Roleplaying Game
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','roleplaying_game') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: roleplaying_game
        turn_off: *surround_standard

      # Music Video Sound Mode
      surround_mode_music_video:
        unique_id: 698237a6-2522-4acf-a5e4-5e3f15e4ad7f
        friendly_name: Music Video
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','music_video') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: music_video
        turn_off: *surround_standard

      # Spectacle Sound Mode
      surround_mode_spectacle:
        unique_id: be1ebe28-1204-408b-9ae0-c889fbe54a86
        friendly_name: Spectacle
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','spectacle') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: spectacle
        turn_off: *surround_standard

      # Sci-Fi Sound Mode
      surround_mode_sci_fi:
        unique_id: 51b21944-665a-4a58-a8a2-1c873aba70a9
        friendly_name: Sci Fi
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','sci-fi') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: sci-fi
        turn_off: *surround_standard

      # Adventure Sound Mode
      surround_mode_adventure:
        unique_id: b96f55a4-7310-4131-86de-b8d546c4a14e
        friendly_name: Adventure
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','adventure') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: adventure
        turn_off: *surround_standard

      # Drama Sound Mode
      surround_mode_drama:
        unique_id: c8339810-5bb6-4d2f-91ee-59b735160d09
        friendly_name: Drama
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','drama') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: drama
        turn_off: *surround_standard

      # Mono Movie Sound Mode
      surround_mode_mono_movie:
        unique_id: 6bd940fc-ecf4-4d14-9d93-4b0c08377d6b
        friendly_name: Mono Movie
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','mono_movie') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: mono_movie
        turn_off: *surround_standard

      # 2ch Stereo Sound Mode
      surround_mode_2ch_stereo:
        unique_id: 0bb27816-d492-4328-966f-fe72451052c5
        friendly_name: 2 Channel Stereo
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','2ch_stereo') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: 2ch_stereo
        turn_off: *surround_standard

      # All Ch Stereo Sound Mode
      surround_mode_all_ch_stereo:
        unique_id: 8e496e08-266e-48b7-8ef7-f8436832b599
        friendly_name: All Channel Stereo
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','all_ch_stereo') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: all_ch_stereo
        turn_off: *surround_standard

      # Surr Decoder Sound Mode
      surround_mode_surr_decoder:
        unique_id: a3b2e4c0-62af-4597-93e4-350c6cded877
        friendly_name: Surround Sound
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','surr_decoder') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: surr_decoder
        turn_off: *surround_standard

      # Straight Sound Mode
      surround_mode_straight:
        unique_id: 3431583e-1064-4c82-8f02-924f01290b00
        friendly_name: Straight
        value_template: "{{ is_state_attr('media_player.yamaha_rx_v6a','sound_mode','straight') }}"
        turn_on:
        - service: media_player.select_sound_mode
          data: 
            entity_id: media_player.yamaha_rx_v6a
            sound_mode: straight
        turn_off: *surround_standard

      ############
      # Hyperion #
      ############

      hyperion:
        unique_id: hyperion
        value_template: >
          {%- set entities = 'switch.gpio_18_tv_component_led_device', 'switch.gpio_18_tv_component_usb_capture' %}
          {{ entities | select('is_state', 'on') | list | count == 2 }}
        turn_on:
        - service: light.turn_on
          target:
            entity_id: 
            - switch.gpio_18_tv_component_led_device
            - switch.gpio_18_tv_component_usb_capture
        turn_off:
        - service: light.turn_off
          target:
            entity_id: 
            - switch.gpio_18_tv_component_led_device
            - switch.gpio_18_tv_component_usb_capture

      hyperion_usb_capture:
        unique_id: hyperion_usb_capture
        value_template: >
          {%- set entities = 'switch.gpio_18_tv_component_led_device', 'switch.gpio_18_tv_component_usb_capture' %}
          {{ entities | select('is_state', 'on') | list | count == 2 }}
        turn_on:
        - service: switch.turn_on
          entity_id:
          - switch.gpio_18_tv_component_led_device
          - switch.gpio_18_tv_component_usb_capture
        turn_off:
        - service: homeassistant.turn_off
          target:
            entity_id: 
            - switch.gpio_18_tv_component_led_device
            - switch.gpio_18_tv_component_usb_capture

      hyperion_cinema:
        unique_id: hyperion_cinema
        value_template: >
          {%- set entity = 'light.gpio_18_tv' %}
          {{ is_state(entity, 'on') and is_state_attr(entity, 'effect', 'Cinema dim lights') }}
        turn_on:
        - service: switch.turn_on
          entity_id: switch.gpio_18_tv_component_led_device
        - service: light.turn_on
          target:
            entity_id: light.gpio_18_tv
          data:
            brightness: 255
            effect: Cinema dim lights
        turn_off:
        - service: homeassistant.turn_off
          target:
            entity_id:
            - light.gpio_18_tv
            - switch.gpio_18_tv_component_led_device

      hyperion_rainbow_swirl_fast:
        unique_id: hyperion_rainbow_swirl_fast
        value_template: >
          {%- set entity = 'light.gpio_18_tv' %}
          {{ is_state(entity, 'on') and is_state_attr(entity, 'effect', 'Rainbow swirl fast') }}
        turn_on:
        - service: switch.turn_on
          entity_id: switch.gpio_18_tv_component_led_device
        - service: light.turn_on
          target:
            entity_id: light.gpio_18_tv
          data:
            brightness: 255
            effect: Rainbow swirl fast
        turn_off:
        - service: homeassistant.turn_off
          target:
            entity_id:
            - light.gpio_18_tv
            - switch.gpio_18_tv_component_led_device

      hyperion_solid_green:
        unique_id: hyperion_solid_green
        value_template: >
          {%- set entity = 'light.gpio_18_tv' %}
          {%- set is_solid = is_state_attr(entity, 'effect', 'Solid') %}
          {%- set is_green = is_state_attr(entity, 'rgb_color', (0, 255, 0)) %}
          {{ is_state(entity, 'on') and is_solid and is_green }}
        turn_on:
        - service: switch.turn_on
          entity_id: switch.gpio_18_tv_component_led_device
        - service: light.turn_on
          target:
            entity_id: light.gpio_18_tv
          data:
            brightness: 255
            rgb_color: [0, 255, 0]
        turn_off:
        - service: homeassistant.turn_off
          target:
            entity_id:
            - light.gpio_18_tv
            - switch.gpio_18_tv_component_led_device

      ########
      # CAST #
      ########

      cast_workout_core:
        unique_id: cast_workout_core
        value_template: >
          {{ states('media_player.chromecast') in ['playing','paused'] and 
            is_state_attr('media_player.chromecast', 'media_title', 'Core') }}
        turn_on: &cast_workout_core
        - service: script.cast_workout_video
          data:
            workout: Core
        turn_off: *chromecast_off
        
      cast_workout_cardio_kickboxing:
        unique_id: cast_workout_cardio_kickboxing
        value_template: >
          {{ states('media_player.chromecast') in ['playing','paused'] and 
            is_state_attr('media_player.chromecast', 'media_title', 'Cardio Kickboxing') }}
        turn_on: &cast_workout_cardio_kickboxing
        - service: script.cast_workout_video
          data:
            workout: Cardio Kickboxing
        turn_off: *chromecast_off

      cast_workout_lower_body:
        unique_id: cast_workout_lower_body
        value_template: >
          {{ states('media_player.chromecast') in ['playing','paused'] and 
            is_state_attr('media_player.chromecast', 'media_title', 'Lower Body') }}
        turn_on: &cast_workout_lower_body
        - service: script.cast_workout_video
          data:
            workout: Lower Body
        turn_off: *chromecast_off

      cast_workout_total_body:
        unique_id: cast_workout_total_body
        value_template: >
          {{ states('media_player.chromecast') in ['playing','paused'] and 
            is_state_attr('media_player.chromecast', 'media_title', 'Total Body') }}
        turn_on: &cast_workout_total_body
        - service: script.cast_workout_video
          data:
            workout: Total Body
        turn_off: *chromecast_off

      cast_workout_upper_body:
        unique_id: cast_workout_upper_body
        value_template: >
          {{ states('media_player.chromecast') in ['playing','paused'] and 
            is_state_attr('media_player.chromecast', 'media_title', 'Upper Body') }}
        turn_on: &cast_workout_upper_body
        - service: script.cast_workout_video
          data:
            workout: Upper Body
        turn_off: *chromecast_off

      ########
      # WLED #
      ########

      # WLED Kitchen Cabinet Lights
      
      wled_all_cabinets:
        unique_id: wled_all_cabinets
        value_template: >
          {%- set lights = ['light.cabinet_wled_master', 'light.wled_microwave_uplight', 'light.wled_refrigerator_uplight', 'light.wled_refrigerator_surface'] %}
          {{ lights | select('is_state', 'on') | list | count == lights | count }}
        turn_on:
        - if: "{{ is_state('switch.indoor_holiday', 'on') }}"
          then:
          - service: script.wled_cabinet_segment_handler
            <<: &wled_script_on
              data:
                to_state: 'on'
          else:
          - <<: &wled_all_cabinets
              service: select.select_option
              target:
                entity_id: select.cabinet_wled_preset
            <<: &wled_match
              data:
                option: Match
        turn_off:
        - if: "{{ is_state('switch.indoor_holiday', 'on') }}"
          then:
          - service: script.wled_cabinet_segment_handler
            <<: &wled_script_off
              data:
                to_state: 'off'
          else:
          - <<: *wled_all_cabinets
            <<: &wled_off
              data:
                option: 'Off'

      # WLED Hutch Lights
      wled_hutch:
        unique_id: wled_hutch
        value_template: >
          {%- set lights = ['light.hutch_master', 'light.hutch_uplight'] %}
          {{ lights | select('is_state', 'on') | list | count == lights | count }}
        turn_on:
        - if: "{{ is_state('switch.indoor_holiday', 'on') }}"
          then:
          - service: script.wled_hutch_segment_handler
            <<: *wled_script_on
          else:
          - <<: &wled_hutch
              service: select.select_option
              target:
                entity_id: select.hutch_preset
            <<: *wled_match
        turn_off:
        - if: "{{ is_state('switch.indoor_holiday', 'on') }}"
          then:
          - service: script.wled_hutch_segment_handler
            <<: *wled_script_off
          else:
          - <<: *wled_hutch
            <<: *wled_off

      # Indoor Holiday Lights
      indoor_holiday:
        unique_id: indoor_holiday
        friendly_name: Indoor Holiday
        value_template: >
          {% set entity =  'binary_sensor.indoor_holiday' %}
          {{ is_state(entity, 'on') and state_attr(entity, 'entity_id') | select('is_state', 'on') | list | length > 0 }}
        turn_on:
        - service: switch.turn_on
          <<: &indoor_holiday
            target: 
              entity_id: >
                {{ state_attr('binary_sensor.indoor_holiday', 'entity_id') }}
        turn_off:
        - service: switch.turn_off
          <<: *indoor_holiday

      # Front Trees
      front_trees:
        unique_id: front_trees
        friendly_name: Front Trees
        value_template: >
          {{ states('select.front_tree_preset') in state_attr('select.front_tree_preset', 'options') | reject('in', ['Match','Off','On']) | list }}
        turn_on:
        - service: select.select_option
          <<: &front_trees
            target:
              entity_id: select.front_tree_preset
          data:
            option: "{{ state_attr('select.front_tree_preset', 'options') | reject('in', ['Match','Off','On']) | list | random }}"
        turn_off:
        - service: select.select_option
          <<: *wled_off
          <<: *front_trees

      # Hutch Holiday
      hutch_holiday:
        unique_id: hutch_holiday
        friendly_name: Hutch Holiday
        value_template: >
          {%- set preset = states('select.hutch_preset') %}
          {%- set playlist = states['select.hutch_playlist'] %}
          {%- set holiday = states('sensor.holiday_lighting') %}
          {%- set is_holiday = holiday != 'no_holiday' %}
          {%- if is_holiday %}
            {%- if preset == 'unknown' %}
            {#- We have a holiday, but we aren't using a preset or playlist, therefore we must be on #}
              {{- is_state('light.hutch_master', 'on') and ['light.hutch_uplight'] | select('is_state', 'on') | list | count > 0 }}
            {%- elif playlist.state is not none and playlist.state in playlist.attributes.options %}True
            {%- else %}False
            {%- endif %}
          {%- else %}False
          {%- endif %}
        turn_on:
        - service: script.wled_hutch_segment_handler
          <<: *wled_script_on
        turn_off:
        - <<: *wled_hutch
          <<: *wled_off

      # Cabinet Holiday
      cabinet_holiday:
        unique_id: cabinet_holiday
        friendly_name: Cabinet Holiday
        value_template: >
          {%- set preset = states('select.cabinet_wled_preset') %}
          {%- set holiday = states('sensor.holiday_lighting') %}
          {%- set is_holiday = holiday != 'no_holiday' %}
          {%- if is_holiday %}
            {%- if preset == 'unknown' %}
            {#- We have a holiday, but we aren't using a preset, therefore we must be on #}
              {{- is_state('light.cabinet_wled_master', 'on') and ['light.wled_microwave_uplight', 'light.wled_refrigerator_uplight', 'light.wled_refrigerator_surface'] | select('is_state', 'on') | list | count > 0 }}
            {%- else %}
              {%- set reject_state = 'Off' if preset == 'Match' else 'On' %}
              {%- set options = state_attr('select.cabinet_wled_preset', 'options') | select('search', 'Christmas') | reject('search', reject_state) | list %}
              {{- preset in options }}
            {%- endif %}
          {%- else %}False
          {%- endif %}
        turn_on:
        - service: script.wled_cabinet_segment_handler
          <<: *wled_script_on
        turn_off:
        - <<: *wled_all_cabinets
          <<: *wled_off

      # Uplighting Holiday
      uplight_holiday:
        unique_id: uplight_holiday
        friendly_name: Uplight Holiday
        value_template: >
          {%- set lights = [
              "light.living_room_uplight",
              "light.dining_room_uplight_1",
              "light.dining_room_uplight_2"
            ] %}
          {{ lights | select('is_state', 'on') | select('is_state_attr', 'color_mode', 'xy') | list | count > 0 }}
        turn_on:
          service: script.indoor_holiday_colors
          data:
            targets: &uplight_holiday
            - light.living_room_uplight
            - light.dining_room_uplight_1
            - light.dining_room_uplight_2
        turn_off:
          service: light.turn_off
          target:
            entity_id: *uplight_holiday

      #################################################
      # Event Radios - Selectors for Events Front End #
      #################################################

      event_category_all:
        unique_id: event_category_all
        friendly_name: Event Category All
        value_template: >
          {{ is_state('input_select.event_category', 'All') }}
        turn_on:
        - <<: &event_category
            service: input_select.select_option
            target:
              entity_id: input_select.event_category
          <<: &event_category_all
            data:
              option: All
        turn_off:
        - <<: *event_category
          <<: *event_category_all

      event_category_vacation:
        unique_id: event_category_vacation
        friendly_name: Event Category Vacation
        value_template: >
          {{ is_state('input_select.event_category', 'Vacation') }}
        turn_on:
        - <<: *event_category
          data:
            option: Vacation
        turn_off:
        - <<: *event_category
          <<: *event_category_all

      event_category_race:
        unique_id: event_category_race
        friendly_name: Event Category Race
        value_template: >
          {{ is_state('input_select.event_category', 'Race') }}
        turn_on:
        - <<: *event_category
          data:
            option: Race
        turn_off:
        - <<: *event_category
          <<: *event_category_all

      event_category_work:
        unique_id: event_category_work
        friendly_name: Event Category Work
        value_template: >
          {{ is_state('input_select.event_category', 'Work') }}
        turn_on:
        - <<: *event_category
          data:
            option: Work
        turn_off:
        - <<: *event_category
          <<: *event_category_all

      event_category_party:
        unique_id: event_category_party
        friendly_name: Event Category Party
        value_template: >
          {{ is_state('input_select.event_category', 'Party') }}
        turn_on:
        - <<: *event_category
          data:
            option: Party
        turn_off:
        - <<: *event_category
          <<: *event_category_all

      ##########################
      # Garage Temporary laser #
      ##########################

      garage_temporary_laser:
        unique_id: garage_temporary_laser
        friendly_name: Garage Temporary Laser
        value_template: "{{ is_state('switch.garage_ceiling_outlet', 'on') }}"
        turn_on:
        - service: switch.turn_on
          <<: &garage_temporary_laser
            target:
              entity_id: switch.garage_ceiling_outlet
        - delay: 45
        - service: switch.turn_off
          <<: *garage_temporary_laser
        turn_off:
        - service: switch.turn_off
          <<: *garage_temporary_laser

      ######################
      # Movie / TV viewing #
      ######################

      movie_time:
        unique_id: movie_time
        friendly_name: Movie Time
        value_template: >
          {{
            is_state('switch.hyperion_usb_capture', 'on')
            and is_state('light.downstairs_ambiance', 'on')
            and is_state('switch.wled_hutch', 'on')
            and is_state('switch.wled_all_cabinets', 'on')
            and is_state('light.dining_room_chandelier', 'off')
            and is_state('light.kitchen_cans', 'off')
            and is_state('light.kitchen_island', 'off')
            and is_state('switch.kitchen_pantry', 'off')
          }}
        turn_on:
        - parallel:
          - service: homeassistant.turn_on
            target:
              entity_id: 
              - switch.hyperion_usb_capture
              - switch.wled_hutch
              - switch.wled_all_cabinets
              - light.downstairs_ambiance
          - service: homeassistant.turn_off
            target:
              entity_id: 
              - light.all_living_room
              - light.dining_room_chandelier
              - light.kitchen_cans
              - light.kitchen_island
              - switch.kitchen_pantry
        turn_off:
        - service: homeassistant.turn_off
          target:
            entity_id: 
            - switch.hyperion_usb_capture
            - switch.wled_hutch
            - switch.wled_all_cabinets
            - light.downstairs_ambiance
            - light.dining_room_chandelier
            - light.kitchen_cans
            - light.kitchen_island
            - switch.kitchen_pantry
